<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Jecstar - Enterprise Telemetry Monitor</title>

    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#5bbad5">


    <link rel="stylesheet" href="styles/theme.min.css">
    <link rel="stylesheet" href="styles/font-awesome.min.css">
    <link rel="stylesheet" href="styles/jquery-ui.min.css">
    <link rel="stylesheet" href="styles/autocomplete.css">
    <link rel="stylesheet" href="styles/etm-commons.css">
    <!-- jQuery first, then Bootstrap JS. -->
    <script src="scripts/tether.min.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/popper.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>

</head>
<body>
<header class="u-header">
    <div class="u-header-left">
        <a class="u-header-logo" href="https://www.jecstar.com" target="_blank">
            <img class="u-logo-desktop" src="./images/jecstar.svg" style="max-height: 2.1rem; max-width: 2.1rem;" alt="Jecstar website" />
            <img class="img-fluid u-logo-mobile" src="./images/jecstar.svg" style="max-height: 2.1rem; max-width: 2.1rem;" alt="Jecstar website" />
        </a>
        <div class="ml-2 mt-1 d-none d-lg-block u-header-brand">
            <h2 class="text-white">Jecstar</h2>
        </div>
    </div>

    <div class="u-header-middle">
        <a class="js-sidebar-invoker u-sidebar-invoker" href="#"
           data-is-close-all-except-this="true"
           data-target="#sidebar">
            <i class="fa fa-bars u-sidebar-invoker__icon--open"></i>
        </a>
    </div>

    <div class="u-header-right">
        <div class="ml-2">
            Logged in as: <span class="text-dark d-none d-sm-inline-block">placeholder-for-contextUser</span>
        </div>
    </div>
</header>
<main class="u-main" role="main">
    <aside id="sidebar" class="u-sidebar">
        <div class="u-sidebar-inner">
            <header class="u-sidebar-header">
                <a class="u-sidebar-logo" href="https://www.jecstar.com">
                    <img class="img-fluid" src="./images/jecstar.svg" style="max-height: 2.1rem; max-width: 2.1rem;" alt="Jecstar website">
                </a>
            </header>

            <nav class="u-sidebar-nav">
                <ul class="u-sidebar-nav-menu u-sidebar-nav-menu--top-level">
                    <li id="placeholder-for-MenuAwareURLResource"></li>
                </ul>
            </nav>
        </div>
    </aside>
    <div class="u-content">
        <div class="container-fluid" style="margin-top: 1em;">
    <div class="card">
        <img class="card-img" src="images/jecstar.svg" alt="Jecstar Innovation Logo"
             style="opacity: 0.1; filter: alpha(opacity=10); margin:0px auto; max-height: 40rem;">
        <div class="card-img-overlay">
            <h3 id="etm-header" class="card-title">Enterprise Telemetry Monitor</h3>
            <div class="card-text">
                <p>
                    Welcome at <a href="https://www.jecstar.com" target="_blank">Jecstar's</a>
                    Enterprise Telemetry Monitor! Enterprise Telemetry Monitor is a
                    highly scalable event processor. The goal of Enterprise Telemetry
                    Monitor is to gain near realtime insights in the information flows
                    inside and between your enterprise applications. It is generally
                    used to help organizations in monitoring their complex application
                    landscape.
                </p>
                <p>
                    Enterprise Telemetry Monitor is currently maintaining
                    <b id="event-count"></b> events for you. Depending on the
                    privileges the Enterprise Telemetry Monitor administrators have
                    given to you, you may search, inspect, correlate or monitor those
                    events. Go ahead and click on any of the menu items to get insight
                    into the data of your business.
                </p>
            </div>
        </div>
    </div>
</div>
    </div>
</main>

<script src="scripts/etm-commons.js"></script>
<script src="scripts/sidebar-nav.js"></script>
<script>
	$.ajax({
	    type: 'GET',
	    contentType: 'application/json',
	    url: 'rest/user/etminfo',
	    cache: false,
	    success: function(data) {
	        if (!data) {
	            return;
	        }
	        $('#event-count').text(data.event_count_as_string);
	        if (data.etm_version) {
	        	$('#etm-header').text($('#etm-header').text() + ' - ' + data.etm_version);
	        }
	    }
	});

</script>

</body>
</html>