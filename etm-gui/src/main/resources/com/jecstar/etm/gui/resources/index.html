<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<title>Jecstar - Enterprise Telemetry Monitor</title>

<link rel="stylesheet" href="styles/bootstrap.min.css">
<link rel="stylesheet" href="styles/font-awesome.min.css">
<link rel="stylesheet" href="styles/jquery-ui.min.css">
<link rel="stylesheet" href="styles/autocomplete.css">
<link rel="stylesheet" href="styles/spinner.css">
<style type="text/css">
body { padding-top: 60px; }
</style>
</head>
<body>
  <nav class="navbar fixed-top navbar-toggleable-sm navbar-inverse" style="background-color: #777;">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#collapsing_navbar" aria-controls="collapsing_navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">
      <img src="../images/jecstar.svg" style="max-height: 2.1rem; max-width: 2.1rem;" class="d-inline-block align-top" alt="">
      Jecstar
    </a>
    <div class="collapse navbar-collapse" id="collapsing_navbar">
      <ul id="etm_mainmenu" class="navbar-nav mr-auto">
      </ul>
    </div>
    <div class="spinner" id="spinner">
      <div class="spinner_line"></div>
      <div class="spinner_line spinner_line_2"></div>
      <div class="spinner_line spinner_line_3"></div>
      <div class="spinner_line spinner_line_4"></div>
    </div>
  </nav>
  
  <div class="container-fluid" style="margin-top: 1em;">
    <div class="card card-block">
      <img class="card-img" src="images/jecstar.svg" alt="Jecstar Innovation Logo" style="opacity: 0.1; filter: alpha(opacity=10); margin:0px auto;display:block;">
      <div class="card-img-overlay">
	      <h5 class="card-title">Enterprise Telemetry Monitor</h5>
		    <div class="card-text">
				<p>
					Welcome at <a href="http://www.jecstar.com" target="_blank">Jecstar's</a>
					Enterprise Telemetry Monitor! Enterprise Telemetry Monitor is a
					highly scalable event processor. The goal of Enterprise Telemetry
					Monitor is to gain near realtime insights in the information flows
					inside and between your enterprise applications. It is generally
					used to help organizations in monitoring their complex application
					landscape.
				</p>
				<p>
					Enterprise Telemetry Monitor is currently maintaining
					<b id="event-count"></b> events for you. Depending on the
					privileges the Enterprise Telemetry Monitor administrators have
					given to you, you may search, inspect, correlate or monitor those
					events. Go ahead and click on any of the menu items to get insight
					into the data of your business.</p>
	        </div>
      </div>
    </div>
  </div>
  
  <!-- jQuery first, then Bootstrap JS. -->
  <script src="scripts/tether.min.js"></script>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/bootstrap.min.js"></script>
  <script src="scripts/menu.js"></script>
  <script>
    $(document).ajaxStart(function () {
        $("#users_errorBox").hide('fast');
        $('#spinner').show('fast');
    }).ajaxStop(function () {
        $('#spinner').hide('fast');
    }).ajaxError(function(event, jqXHR, settings, thrownError) {
        if ("undefined" != typeof jqXHR.responseJSON) {
            $('#users_errorBox').text('Error saving user configuration: ' +  jqXHR.responseJSON.message + ' (' + jqXHR.responseJSON.code + ')').show('fast');
        } else {
            $('#users_errorBox').text('Error saving user configuration: ' +  thrownError).show('fast');
        }
        $('html,body').animate({scrollTop: 0},'fast');
    }).ajaxComplete(function(event, jqXHR, settings) {
        var contentType = jqXHR.getResponseHeader("Content-Type");
        if (jqXHR.status === 200 && contentType.toLowerCase().indexOf("text/html") >= 0) {
            // assume that our login has expired - reload our current page
            window.location.reload();
            return;
        }          
        $('html,body').animate({scrollTop: 0},'fast');
    });
  	buildMenu('', './');
	$.ajax({
	    type: 'GET',
	    contentType: 'application/json',
	    url: 'rest/user/eventstats',
	    success: function(data) {
	        if (!data) {
	            return;
	        }
	        $('#event-count').text(data.event_count_as_string);
	    }
	});
  </script>
  
</body>
</html>