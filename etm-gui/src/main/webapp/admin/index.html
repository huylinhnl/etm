<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Enterprise Telemetry Monitor - Administration</title>
<link rel="stylesheet"
	href="../resources/styles/bootstrap-3.3.1.min.css" />
<script src="../resources/scripts/jquery-2.1.3.min.js"></script>
<script src="../resources/scripts/bootstrap-3.3.1.min.js"></script>
</head>
<body>
	<div class="container" style="margin-top: 0.5em;">
		<div class="row">
			<div class="panel panel-default">
				<div class="panel-heading clearfix">
                    <div class="panel-title pull-left" id="node_title">ETM Administration - Global cluster</div>
                    <div class="pull-right">
                        <select id="node_select" class="form-control">
                            <option value="Global cluster">Global cluster</option>
                            <option disabled="disabled">-----</option>
                        </select>
                    </div>
                </div>
				<div class="panel-body">
					<div id="tabs" role="tabpanel">
					  <!-- Nav tabs -->
					  <ul class="nav nav-tabs" role="tablist">
					    <li id="etm_tab_header" role="presentation" class="active"><a href="#etm_tab" aria-controls="home" role="tab" data-toggle="tab">ETM</a></li>
					    <li id="endpoint_tab_header" role="presentation"><a href="#endpoint_tab" aria-controls="home" role="tab" data-toggle="tab">Endpoint</a></li>
					    <li id="solr_tab_header" role="presentation"><a href="#solr_tab" aria-controls="home" role="tab" data-toggle="tab">Solr</a></li>
					    <li id="cassandra_tab_header" role="presentation"><a href="#cassandra_tab" aria-controls="home" role="tab" data-toggle="tab">Cassandra</a></li>
					  </ul>
					  <br />
					  <!-- Tab panes -->
					  <div class="tab-content">
					    <div role="tabpanel" class="tab-pane active" id="etm_tab">
					       <form class="form-horizontal">
					          <div class="form-group">
                                <label class="col-sm-3 control-label">Enhancing handler count</label>
                                <div class="col-sm-3">
                                  <input id="enhancing_handler_count" type="number" class="form-control" required="required" min="1" max="99" />
                                </div>
                                <label class="col-sm-3 control-label">Creation time</label>
                                <div class="col-sm-3">
                                  <p id="event_creationTime" class="form-control-static"></p>
                                </div>
                              </div>
                              
                              <div class="form-group">
                                <label class="col-sm-3 control-label">Indexing handler count</label>
                                <div class="col-sm-3">
                                  <input id="enhancing_handler_count" type="number" class="form-control" required="required" min="1" max="99" />
                                </div>
                                <label class="col-sm-3 control-label">Creation time</label>
                                <div class="col-sm-3">
                                  <p id="event_creationTime" class="form-control-static"></p>
                                </div>
                              </div>

                              <div class="form-group">
                                <label class="col-sm-3 control-label">Persisting handler count</label>
                                <div class="col-sm-3">
                                  <input id="enhancing_handler_count" type="number" class="form-control" required="required" min="1" max="99" />
                                </div>
                                <label class="col-sm-3 control-label">Creation time</label>
                                <div class="col-sm-3">
                                  <p id="event_creationTime" class="form-control-static"></p>
                                </div>
                              </div>
					       </form>
					    </div>
                        <div role="tabpanel" class="tab-pane" id="endpoint_tab">
                           Endpoint settings
                        </div>
                        <div role="tabpanel" class="tab-pane" id="solr_tab">
                            Solr settings
                        </div>		    
                        <div role="tabpanel" class="tab-pane" id="cassandra_tab">
                            Cassandra settings
                        </div>          
					  </div>
					</div>				
				</div>
			</div>
		</div>
	</div>
        <script>
//<![CDATA[        
$(function () {
	// Add all nodes to the node select.
	$.getJSON('../rest/admin/nodes/', function (data) {
        if (!data) {
            return;
        }
        $.each(data, function(index, nodeData) {
        	$('#node_select').append($('<option></option>').attr("value", nodeData.name).text(nodeData.name)); 
        });		
	});
	// Add the change listener to the node select.
	$('#node_select').change(function() {
		var nodeName = $('#node_select').val();
	    $('#node_title').text('ETM Administration - ' + nodeName);
	    if ('Global cluster' == nodeName) {
            $('#endpoint_tab_header').removeClass('hidden');
            $('#endpoint_tab').removeClass('hidden');
            $('#solr_tab_header').removeClass('hidden');
            $('#solr_tab').removeClass('hidden');
		} else {
			var activeTab = $("#tabs > ul > li.active > a").attr('href');
            if ('#endpoint_tab' == activeTab || '#solr_tab' == activeTab) {
                $('#tabs a[href="#etm_tab"]').tab('show')
            }
			$('#endpoint_tab_header').addClass('hidden');
            $('#endpoint_tab').addClass('hidden');
            $('#solr_tab_header').addClass('hidden');
            $('#solr_tab').addClass('hidden');
	    }
	});
});
//]]>
</script>	
</body>
</html>
