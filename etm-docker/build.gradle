plugins {
    id 'base'
}

task copyDockerResources(type: Copy) {
    from 'src/main/docker'
    into buildDir.getName() + '/docker'
    exclude 'Dockerfile.template'
}

build {
    doLast {
        File dockerFile = file(buildDir.getName() + '/docker/Dockerfile')
        dockerFile.text = file('src/main/docker/Dockerfile.template').text.replace('${etm-version}', project.version)
    }
}

build.dependsOn copyDockerResources
